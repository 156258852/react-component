{"version":3,"sources":["../node_modules/antd/es/row/index.js","../node_modules/antd/es/col/index.js","views/download/index.jsx"],"names":["Row","Col","Download","useState","picUrl","setPicUrl","container","useRef","getFileBlob","Promise","resolve","xhr","XMLHttpRequest","open","responseType","send","onload","fileBlob","response","className","ref","style","marginBottom","marginRight","type","onClick","node","current","imgEl","document","createElement","src","appendChild","then","res","blob","Blob","filename","Date","now","link","body","querySelector","href","window","URL","createObjectURL","download","display","click","removeChild","revokeObjectURL","width","value","onChange","e","target"],"mappings":"uGAAA,aACeA,MAAG,C,mCCDlB,aACeC,MAAG,C,gJC8DHC,UAxDf,WACE,MAA4BC,mBAAS,IAAG,mBAAjCC,EAAM,KAAEC,EAAS,KAClBC,EAAYC,mBAsBZC,EAAc,SAACJ,GACnB,OAAO,IAAIK,SAAQ,SAAAC,GACjB,IAAMC,EAAM,IAAIC,eAChBD,EAAIE,KAAK,MAAOT,GAChBO,EAAIG,aAAe,OACnBH,EAAII,OACJJ,EAAIK,OAAS,WACX,IAAMC,EAAWN,EAAIO,SACrBR,EAAQO,EACV,CACF,GACF,EAEA,OACE,qBAAKE,UAAU,qBAAqBC,IAAKd,EAAU,SACjD,cAAC,IAAG,CAACe,MAAO,CAAEC,aAAc,QAAS,SACnC,eAAC,IAAG,WACF,cAAC,IAAM,CAACD,MAAO,CAAEE,YAAa,QAAUC,KAAK,OAAOC,QAtC7C,WACb,IAAiBC,EAASpB,EAAlBqB,QACFC,EAAQC,SAASC,cAAc,OACrCF,EAAMG,IAAM3B,EACZsB,EAAKM,YAAYJ,GACjBpB,EAAYoB,GAAOK,MAAK,SAAAC,GACtB,IAAMC,EAAO,IAAIC,KAAK,CAACF,IACjBG,EAAQ,UAAMC,KAAKC,MAAK,IAAI,OAC5BC,EAAOX,SAASC,cAAc,KAC9BW,EAAOZ,SAASa,cAAc,QACpCF,EAAKG,KAAOC,OAAOC,IAAIC,gBAAgBX,GACvCK,EAAKO,SAAWV,EAChBG,EAAKnB,MAAM2B,QAAU,OACrBP,EAAKT,YAAYQ,GACjBA,EAAKS,QACLR,EAAKS,YAAYV,GACjBI,OAAOC,IAAIM,gBAAgBX,EAAKG,KAClC,GAEF,EAmB4E,0BACpE,eAAC,IAAK,WACJ,6DACA,cAAC,IAAK,CACJtB,MAAO,CAAE+B,MAAO,SAChBC,MAAOjD,EACPkD,SAAU,SAACC,GAAQlD,EAAUkD,EAAEC,OAAOH,MAAO,aAO3D,C","file":"static/js/16.887698c2.chunk.js","sourcesContent":["import { Row } from '../grid';\nexport default Row;","import { Col } from '../grid';\nexport default Col;","import { Button, Col, Form, Input, Row, Space } from 'antd'\r\nimport React from 'react'\r\nimport { createElement } from 'react'\r\nimport { useRef } from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport \"./index.less\"\r\nfunction Download() {\r\n  const [picUrl, setPicUrl] = useState(\"\")\r\n  const container = useRef()\r\n  const btnEvt = () => {\r\n    const { current: node } = container\r\n    const imgEl = document.createElement(\"img\")\r\n    imgEl.src = picUrl\r\n    node.appendChild(imgEl)\r\n    getFileBlob(imgEl).then(res => {\r\n      const blob = new Blob([res]);\r\n      const filename = `${Date.now()}.${\"png\"}`\r\n      const link = document.createElement(\"a\");\r\n      const body = document.querySelector(\"body\");\r\n      link.href = window.URL.createObjectURL(blob); // 创建对象url\r\n      link.download = filename;\r\n      link.style.display = \"none\";\r\n      body.appendChild(link);\r\n      link.click();\r\n      body.removeChild(link);\r\n      window.URL.revokeObjectURL(link.href); // 通过调用 URL.createObjectURL() 创建的 URL 对象\r\n    })\r\n\r\n  }\r\n\r\n  const getFileBlob = (picUrl) => {\r\n    return new Promise(resolve => {\r\n      const xhr = new XMLHttpRequest()\r\n      xhr.open(\"get\", picUrl)\r\n      xhr.responseType = \"blob\"\r\n      xhr.send()\r\n      xhr.onload = () => {\r\n        const fileBlob = xhr.response\r\n        resolve(fileBlob)\r\n      }\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='download-container' ref={container}>\r\n      <Row style={{ marginBottom: \"15px\" }}>\r\n        <Col>\r\n          <Button style={{ marginRight: \"15px\" }} type=\"link\" onClick={btnEvt}>下载</Button>\r\n          <Space>\r\n            <span>图片地址:</span>\r\n            <Input\r\n              style={{ width: \"500px\" }}\r\n              value={picUrl}\r\n              onChange={(e) => { setPicUrl(e.target.value) }}\r\n            />\r\n          </Space>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Download\r\n\r\n"],"sourceRoot":""}